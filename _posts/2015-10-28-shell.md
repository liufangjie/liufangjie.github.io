---
layout: post
title: shell脚本
---
{{ page.title }}
================

# 查看端口情况

`netstat -ntlp`

# 按名称查找进程

`ps -ef | grep tomcat`

# 统计tcp状态

`netstat -n | awk '/^tcp/ {++y[$NF]} END {for(w in y) print w, y[w]}'`

# 截取文本文件中指定范围的文本内容并输出到新文本，日志分析，文本内容查找

[sed, a stream editor](https://www.gnu.org/software/sed/manual/sed.html)

1. 通过grep找到要截取的文本所在行号`cat -l | grep "要查找的文本内容"`

2. 通过sed命令，截取并输出到新文本`sed -n 'start-line_num,end_line_nump' input.txt > output.txt`

例如：`sed -n '100,200p' input.txt > output.txt`

上述命令将input.txt的第100行到200行截取后输出到output.txt

# 常见命令

1. `grep -n 'text' filename.suffix` 在filename.suffix中搜索'text'

2. \cp -rf test test1 拷贝test到test1目录下文件存在直接覆盖，命令前加入斜杠不会提示是否覆盖，否则由于cp命令一般有默认的-i选项所以会出现是否覆盖的提示

3. 端口监听`netstat`

# 循环

declare -i i=1

while ((i<1000))

do

  这里放要执行的命令
  
  let i++
  
done

# 进程查看及操作

1. windows：

`netstat -nao` //列出所有进程以及其占用的端口

记住进程号

`taskkill -PID 进程号 -F`  //强制关闭某个进程

2. linux：

`netstat -naop`

`kill 进程号 -f`